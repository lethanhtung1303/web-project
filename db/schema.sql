DROP TABLE IF EXISTS TDT_PROPERTY_IMG;
DROP TABLE IF EXISTS TDT_PROPERTY_INFO;
DROP TABLE IF EXISTS TDT_USER_INFO;
DROP TABLE IF EXISTS TDT_NEWS;
DROP TABLE IF EXISTS TDT_CONTACT;
DROP TABLE IF EXISTS TDT_BOOKING;
DROP TABLE IF EXISTS TDT_STORAGE;
DROP TABLE IF EXISTS TDT_PROPERTY;
DROP TABLE IF EXISTS TDT_PROPERTY_TYPE;
DROP TABLE IF EXISTS TDT_USER;
DROP TABLE IF EXISTS TDT_ROLE;

CREATE TABLE TDT_ROLE
(
    ROLE_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    ROLE_NAME VARCHAR2(64 CHAR) NOT NULL,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
    CREATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
    CREATE_DATETIME DATE NOT NULL,
    LASTUP_USER_ID VARCHAR2(64 CHAR),
    LASTUP_DATETIME DATE,
	PRIMARY KEY(ROLE_ID),
	CONSTRAINT UQ_TDT_ROLE_01 UNIQUE(ROLE_NAME)
);
INSERT INTO TDT_ROLE (ROLE_ID, ROLE_NAME, IS_DELETED, CREATE_USER_ID, CREATE_DATETIME, LASTUP_USER_ID, LASTUP_DATETIME) VALUES
                                                                                                                            (1, 'ADMIN', '0', '1', '2022-01-01', '', ''),
                                                                                                                            (2, 'USER', '0', '1', '2022-01-01', '', '');


CREATE TABLE TDT_USER
(
    USER_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    EMAIL VARCHAR2(64 CHAR) NOT NULL,
    PASSWORD VARCHAR2(200 CHAR) NOT NULL,
    ROLE_ID  NUMBER(19,0) NOT NULL,
    APPROVE_STATUS VARCHAR2(10 CHAR) NOT NULL,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
    CREATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
    CREATE_DATETIME DATE NOT NULL,
    LASTUP_USER_ID VARCHAR2(64 CHAR),
    LASTUP_DATETIME DATE,
	PRIMARY KEY(USER_ID),
	CONSTRAINT UQ_TDT_USER_01 UNIQUE(EMAIL)
);
INSERT INTO TDT_USER (USER_ID, EMAIL, PASSWORD, ROLE_ID, APPROVE_STATUS, IS_DELETED, CREATE_USER_ID, CREATE_DATETIME, LASTUP_USER_ID, LASTUP_DATETIME) VALUES
    (1, 'admin@gmail.com', '123456', 1, 'APPROVE', '0', '1', '2022-01-01', '', '');

CREATE TABLE TDT_USER_INFO
(
    USER_INFO_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    USER_ID NUMBER(19,0) NOT NULL,
    STD_ID VARCHAR2(64 CHAR),
    NAME VARCHAR2(64 CHAR) NOT NULL,
    ADDRESS VARCHAR2(200 CHAR),
    ID_CARD VARCHAR2(64 CHAR),
    F_CARD VARCHAR2(200 CHAR),
    B_CARD VARCHAR2(200 CHAR),
    PORTRAIT VARCHAR2(200 CHAR),
    PHONE VARCHAR2(64 CHAR) NOT NULL,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
    LASTUP_USER_ID VARCHAR2(64 CHAR),
    LASTUP_DATETIME DATE,
    PRIMARY KEY(USER_INFO_ID),
    CONSTRAINT UQ_USER_INFO_01 UNIQUE(STD_ID,ID_CARD,PHONE)
);
INSERT INTO TDT_USER_INFO (USER_INFO_ID, USER_ID, STD_ID, NAME, ADDRESS, ID_CARD, F_CARD, B_CARD, PORTRAIT, PHONE, IS_DELETED, LASTUP_USER_ID, LASTUP_DATETIME) VALUES
    (1, 1, '', 'ADMIN', '', '', '', '', '', '0900000000', '0', '', '');


CREATE TABLE TDT_PROPERTY_TYPE
(
    TYPE_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    NAME VARCHAR2(64 CHAR) NOT NULL,
    CREATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
    CREATE_DATETIME DATE NOT NULL,
    LASTUP_USER_ID VARCHAR2(64 CHAR),
    LASTUP_DATETIME DATE,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
	PRIMARY KEY(TYPE_ID),
	CONSTRAINT UQ_TDT_PROPERTY_TYPE_01 UNIQUE(NAME)
);

INSERT INTO TDT_PROPERTY_TYPE (TYPE_ID, NAME,CREATE_USER_ID,CREATE_DATETIME,LASTUP_USER_ID,LASTUP_DATETIME,IS_DELETED) VALUES
                                                                                                                           (1, 'Cho thu√™ ph√≤ng tr·ªç','1','2023-01-01 00:00:00.000',NULL,NULL,'0'),
                                                                                                                           (2, 'Cho thu√™ nh√† nguy√™n cƒÉn','1','2023-01-01 00:00:00.000',NULL,NULL,'0'),
                                                                                                                           (3, 'Cho thu√™ cƒÉn h·ªô mini','1','2023-01-01 00:00:00.000',NULL,NULL,'0'),
                                                                                                                           (4, 'Cho thu√™ cƒÉn h·ªô d·ªãch v·ª•','1','2023-01-01 00:00:00.000',NULL,NULL,'0'),
                                                                                                                           (5, 'T√¨m ng∆∞·ªùi ·ªü gh√©p','1','2023-01-01 00:00:00.000',NULL,NULL,'0');

CREATE TABLE TDT_PROPERTY
(
    PROPERTY_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    TYPE_ID NUMBER(19,0) NOT NULL,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
    CREATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
    CREATE_DATETIME DATE NOT NULL,
    LASTUP_USER_ID VARCHAR2(64 CHAR),
    LASTUP_DATETIME DATE,
	PRIMARY KEY(PROPERTY_ID)
);

INSERT INTO PUBLIC.TDT_PROPERTY (PROPERTY_ID,TYPE_ID,IS_DELETED,CREATE_USER_ID,CREATE_DATETIME,LASTUP_USER_ID,LASTUP_DATETIME) VALUES
                                                                                                                                   (231001,1,'0','1','2023-01-03 12:56:21.000',NULL,NULL),
                                                                                                                                   (231002,1,'0','1','2023-01-03 12:58:19.000',NULL,NULL),
                                                                                                                                   (231003,1,'0','1','2023-01-03 12:59:37.000',NULL,NULL),
                                                                                                                                   (231004,1,'0','1','2023-01-03 13:00:39.000',NULL,NULL),
                                                                                                                                   (231005,1,'0','1','2023-01-03 13:01:40.000',NULL,NULL),
                                                                                                                                   (231006,1,'0','1','2023-01-03 13:03:56.000',NULL,NULL);

CREATE TABLE TDT_PROPERTY_INFO
(
    PROPERTY_INFO_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    PROPERTY_ID NUMBER(19,0) NOT NULL,
    TITLE VARCHAR2(4000 CHAR) NOT NULL,
    ADDRESS VARCHAR2(4000 CHAR) NOT NULL,
    AMOUNT NUMBER(38,0) NOT NULL,
    AREA NUMBER(38,0) NOT NULL,
    DESCRIPTION VARCHAR2(4000 CHAR) NOT NULL,
    APPROVE_STATUS VARCHAR2(10 CHAR) NOT NULL,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
    PRIMARY KEY(PROPERTY_INFO_ID)
);

INSERT INTO TDT_PROPERTY_INFO (PROPERTY_INFO_ID, PROPERTY_ID,TITLE,ADDRESS,AMOUNT,AREA,DESCRIPTION,APPROVE_STATUS,IS_DELETED) VALUES
                                                                                                                                  (1, 231001,'H·ªá th·ªëng cƒÉn h·ªô Full NT c√≥ c·ª≠a s·ªï g·∫ßn Lotte_Himlam_Trung S∆°n_ƒêH RMIT','Nguy·ªÖn Th·ªã Th·∫≠p, Ph∆∞·ªùng T√¢n Quy, Qu·∫≠n 7, TPHCM',4800000,30,'Ph·∫ßn n√†y ƒë·ªÉ test!!!','UNAPPROVE','0'),
                                                                                                                                  (2, 231002,'Studio b·∫øp t√°ch, full n·ªôi th·∫•t, c√≥ m√°y gi·∫∑t ri√™ng, g·∫ßn c·∫ßu K√™nh T·∫ª Q4','Phan Huy Th·ª±c, Ph∆∞·ªùng T√¢n Ki·ªÉng, Qu·∫≠n 7, TPHCM',4500000,30,'Ph·∫ßn n√†y ƒë·ªÉ test!!!','UNAPPROVE','0'),
                                                                                                                                  (3, 231003,'CHDV 5 sao c√≥ H·ªì B∆°i_Gym - Free ph√≠_ g·∫ßn Ph√∫ M·ªπ H∆∞ng - Lotte Mart Q7','Nguy·ªÖn Th·ªã Th·∫≠p, Ph∆∞·ªùng T√¢n Ph√∫, Qu·∫≠n 7, TPHCM',5000000,40,'Ph·∫ßn n√†y ƒë·ªÉ test!!!','UNAPPROVE','0'),
                                                                                                                                  (4, 231004,'CƒÉn h·ªô 35m2_M√°y gi·∫∑t ri√™ng_Ban c√¥ng thi·∫øt k·∫ø ƒë·∫πp g·∫ßn trung t√¢m Qu·∫≠n 7','Mai VƒÉn Vƒ©nh, Ph∆∞·ªùng T√¢n Quy, Qu·∫≠n 7, TPHCM',5000000,45,'Ph·∫ßn n√†y ƒë·ªÉ test!!!','UNAPPROVE','0'),
                                                                                                                                  (5, 231005,'CƒÉn h·ªô g√°c l·ªØng, full n·ªôi th·∫•t, c√≥ bancong tho√°ng m√°t, khu P.M.H∆∞ng Q7','Ph·∫°m Th√°i B∆∞·ªùng, Ph∆∞·ªùng T√¢n Phong, Qu·∫≠n 7, TPHCM',4500000,30,'Ph·∫ßn n√†y ƒë·ªÉ test!!!','UNAPPROVE','0'),
                                                                                                                                  (6, 231006,'üè¢ H·ªá Th·ªëng CƒÉn H·ªô Cao C·∫•p T·∫°i Qu·∫≠n 7 - Nh√† B√® üè¢','Nguy·ªÖn Th·ªã Th·∫≠p, Ph∆∞·ªùng T√¢n Quy, Qu·∫≠n 7, TPHCM',5000000,40,'Ph·∫ßn n√†y ƒë·ªÉ test!!!','UNAPPROVE','0');

CREATE TABLE TDT_PROPERTY_IMG
(
    PROPERTY_IMG_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    PROPERTY_ID NUMBER(19,0) NOT NULL,
    PROPERTY_IMG VARCHAR2(200 CHAR)  NOT NULL,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
	PRIMARY KEY(PROPERTY_IMG_ID)
);

INSERT INTO TDT_PROPERTY_IMG (PROPERTY_IMG_ID,PROPERTY_ID,PROPERTY_IMG,IS_DELETED) VALUES
                                                                                       (1,231001,'https://cloud.mogi.vn/images/2022/04/03/074/49b1e82733fe4cc0acdd816bb065a397.jpg','0'),
                                                                                       (2,231001,'https://cloud.mogi.vn/images/2022/04/03/075/e022c9a951274222b56eeb886964ef48.jpg','0'),
                                                                                       (3,231001,'https://cloud.mogi.vn/images/2022/04/03/076/6952bdf5fcb648dfa05ec4dfaa748cb5.jpg','0'),
                                                                                       (4,231002,'https://cloud.mogi.vn/images/2021/11/01/349/50413f8aacd04f58b203a11230552399.jpg','0'),
                                                                                       (5,231002,'https://cloud.mogi.vn/images/2021/11/01/340/aba10879e5654a89a8799eec179af5e5.jpg','0'),
                                                                                       (6,231002,'https://cloud.mogi.vn/images/2021/11/01/340/460b5dd45b574799a1e20655af6c54c3.jpg','0'),
                                                                                       (7,231003,'https://cloud.mogi.vn/images/2021/07/01/314/2ad8f4a0486b44b4b5adc414dd820b78.jpg','0'),
                                                                                       (8,231003,'https://cloud.mogi.vn/images/2021/07/01/314/3e954431184e450689535b1780f78b1b.jpg','0'),
                                                                                       (9,231003,'https://cloud.mogi.vn/images/2021/07/01/311/7ebd8c85d0654466bfb7774361897900.jpg','0'),
                                                                                       (10,231004,'https://cloud.mogi.vn/images/2021/04/26/052/25b020d50000459d968f74e82c2cde4a.jpg','0'),
                                                                                       (11,231004,'https://cloud.mogi.vn/images/2021/04/26/057/b0936edd6b9841d999540720d64be5ae.jpg','0'),
                                                                                       (12,231004,'https://cloud.mogi.vn/images/2021/04/26/066/2e47e2656a884aa28f10b839b53025b0.jpg','0'),
                                                                                       (13,231005,'https://cloud.mogi.vn/images/2020/11/18/549/c7e1653b33034925820f2a700312e083.jpg','0'),
                                                                                       (14,231005,'https://cloud.mogi.vn/images/2020/11/18/549/ecc22f54705b4d8d96a2666e7270b1c8.jpg','0'),
                                                                                       (15,231005,'https://cloud.mogi.vn/images/2020/11/18/540/61d9833f733442188bdb86ca6273e6c8.jpg','0'),
                                                                                       (16,231006,'https://cloud.mogi.vn/images/2021/11/26/248/121be547c74b45a298d7782b4511bd52.jpg','0'),
                                                                                       (17,231006,'https://cloud.mogi.vn/images/2021/11/26/244/74b450d1971e40009e50fbfc251d30ce.jpg','0'),
                                                                                       (18,231006,'https://cloud.mogi.vn/images/2021/11/26/247/3f230907600c4a3d8b028b364be91a70.jpg','0');

CREATE TABLE TDT_STORAGE
(
    STORAGE_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    PROPERTY_ID NUMBER(19,0) NOT NULL,
    USER_ID NUMBER(19,0) NOT NULL,
    CREATE_DATETIME DATE NOT NULL,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
    PRIMARY KEY(STORAGE_ID)
);

CREATE TABLE TDT_BOOKING
(
    BOOKING_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    PROPERTY_ID NUMBER(19,0) NOT NULL,
    BOOKING_DATE DATE NOT NULL,
    NOTE VARCHAR2(4000 CHAR),
    APPROVE_STATUS VARCHAR2(10 CHAR) NOT NULL,
    CREATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
    CREATE_DATETIME DATE NOT NULL,
    LASTUP_USER_ID VARCHAR2(64 CHAR),
    LASTUP_DATETIME DATE,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
    PRIMARY KEY(BOOKING_ID)
);

CREATE TABLE TDT_CONTACT
(
    CONTACT_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    CONTENT VARCHAR2(4000 CHAR) NOT NULL,
    EMAIL VARCHAR2(64 CHAR) NOT NULL,
    PHONE VARCHAR2(64 CHAR),
    APPROVE_STATUS VARCHAR2(10 CHAR) NOT NULL,
    HANDLER_ID NUMBER(19,0),
    CREATE_DATETIME DATE NOT NULL,
    LASTUP_USER_ID VARCHAR2(64 CHAR),
    LASTUP_DATETIME DATE,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
    PRIMARY KEY(CONTACT_ID)
);

CREATE TABLE TDT_NEWS
(
    NEWS_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    TITLE VARCHAR2(4000 CHAR) NOT NULL,
    CONTENT VARCHAR2(4000 CHAR) NOT NULL,
    COVER VARCHAR2(64 CHAR),
    CREATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
    CREATE_DATETIME DATE NOT NULL,
    LASTUP_USER_ID VARCHAR2(64 CHAR),
    LASTUP_DATETIME DATE,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
	PRIMARY KEY(NEWS_ID)
);

ALTER TABLE TDT_USER
    ADD CONSTRAINT FK_TDT_USER_TDT_ROLE FOREIGN KEY(ROLE_ID)
        REFERENCES TDT_ROLE(ROLE_ID)
;

ALTER TABLE TDT_USER_INFO
    ADD CONSTRAINT FK_TDT_USER_INFO_TDT_USER FOREIGN KEY(USER_ID)
        REFERENCES TDT_USER(USER_ID)
;

ALTER TABLE TDT_PROPERTY
    ADD CONSTRAINT FK_TDT_PROPERTY_TDT_PROPERTY_TYPE FOREIGN KEY(TYPE_ID)
        REFERENCES TDT_PROPERTY_TYPE(TYPE_ID)
;

ALTER TABLE TDT_PROPERTY_INFO
    ADD CONSTRAINT FK_TDT_PROPERTY_INFO_TDT_PROPERTY FOREIGN KEY(PROPERTY_ID)
        REFERENCES TDT_PROPERTY(PROPERTY_ID)
;

ALTER TABLE TDT_STORAGE
    ADD CONSTRAINT FK_TDT_STORAGE_TDT_PROPERTY FOREIGN KEY(PROPERTY_ID)
        REFERENCES TDT_PROPERTY(PROPERTY_ID)
;

ALTER TABLE TDT_STORAGE
    ADD CONSTRAINT FK_TDT_STORAGE_TDT_USER FOREIGN KEY(USER_ID)
        REFERENCES TDT_USER(USER_ID)
;

ALTER TABLE TDT_BOOKING
    ADD CONSTRAINT FK_TDT_BOOKING_TDT_PROPERTY FOREIGN KEY(PROPERTY_ID)
        REFERENCES TDT_PROPERTY(PROPERTY_ID)
;

ALTER TABLE TDT_BOOKING
    ADD CONSTRAINT FK_TDT_BOOKING_TDT_USER FOREIGN KEY(CREATE_USER_ID)
        REFERENCES TDT_USER(USER_ID)
;

ALTER TABLE TDT_CONTACT
    ADD CONSTRAINT FK_TDT_CONTACT_TDT_USER FOREIGN KEY(HANDLER_ID)
        REFERENCES TDT_USER(USER_ID)
;

ALTER TABLE TDT_NEWS
    ADD CONSTRAINT FK_TDT_NEWS_TDT_USER FOREIGN KEY(CREATE_USER_ID)
        REFERENCES TDT_USER(USER_ID)
;

ALTER TABLE TDT_PROPERTY_IMG
    ADD CONSTRAINT FK_TDT_PROPERTY_IMG_TDT_PROPERTY FOREIGN KEY(PROPERTY_ID)
        REFERENCES TDT_PROPERTY(PROPERTY_ID)
;