CREATE TABLE TDT_BUDGET
(
    BUDGET_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
	AUDIT_CREATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
	AUDIT_CREATE_DATETIME DATE NOT NULL,
	AUDIT_UPDATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
	AUDIT_UPDATE_DATETIME DATE NOT NULL,
	PRIMARY KEY(BUDGET_ID)
);

CREATE TABLE TDT_BUDGET_FY
(
    BUDGET_FY_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    BUDGET_ID NUMBER(19,0) NOT NULL,
    FISCAL_YEAR VARCHAR2(4 CHAR)NOT NULL,
    APPROVE_STATUS VARCHAR2(10 CHAR) NOT NULL,
    CREATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
    CREATE_DATETIME DATE NOT NULL,
    LASTUP_USER_ID VARCHAR2(64 CHAR) NOT NULL,
    LASTUP_DATETIME DATE NOT NULL,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
	AUDIT_CREATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
	AUDIT_CREATE_DATETIME DATE NOT NULL,
	AUDIT_UPDATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
	AUDIT_UPDATE_DATETIME DATE NOT NULL,
	PRIMARY KEY(BUDGET_FY_ID),
	CONSTRAINT UQ_TDT_BUDGET_FY_01 UNIQUE(BUDGET_ID,FISCAL_YEAR)
);


CREATE TABLE TDT_BUDGET_FORECAST_ARCHIVE
(
    BUDGET_FORECAST_ARCHIVE_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    BUDGET_FY_ID NUMBER(19,0) NOT NULL,
    DATE_YM DATE NOT NULL,
    AMOUNT NUMBER(38,0) NOT NULL,
    FORECAST_ARCHIVE_VERSION_ID NUMBER(19,0) NOT NULL,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
	AUDIT_CREATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
	AUDIT_CREATE_DATETIME DATE NOT NULL,
	AUDIT_UPDATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
	AUDIT_UPDATE_DATETIME DATE NOT NULL,
	PRIMARY KEY(BUDGET_FORECAST_ARCHIVE_ID),
	CONSTRAINT UQ_TDT_BFA_01 UNIQUE(BUDGET_FY_ID,DATE_YM,FORECAST_ARCHIVE_VERSION_ID)
);

CREATE TABLE TDT_FORECAST_ARCHIVE_VERSION
(
    FORECAST_ARCHIVE_VERSION_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    ARCHIVE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
    ARCHIVE_DATETIME DATE NOT NULL,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
	AUDIT_CREATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
	AUDIT_CREATE_DATETIME DATE NOT NULL,
	AUDIT_UPDATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
	AUDIT_UPDATE_DATETIME DATE NOT NULL,
	PRIMARY KEY(FORECAST_ARCHIVE_VERSION_ID)
);

ALTER TABLE TDT_BUDGET_FY
    ADD CONSTRAINT FK_TDT_BUDGET_FY_TR_BUDGET FOREIGN KEY(BUDGET_ID)
        REFERENCES TDT_BUDGET(BUDGET_ID)
;
ALTER TABLE TDT_BUDGET_FORECAST_ARCHIVE
    ADD CONSTRAINT FK_TDT_BUDGET_FORECAST_ARCHIVE FOREIGN KEY(BUDGET_FY_ID)
        REFERENCES TDT_BUDGET_FY(BUDGET_FY_ID)
;

ALTER TABLE TDT_BUDGET_FORECAST_ARCHIVE
    ADD CONSTRAINT FK_FORECAST_ARCHIVE_VERSION FOREIGN KEY(FORECAST_ARCHIVE_VERSION_ID)
        REFERENCES TDT_FORECAST_ARCHIVE_VERSION(FORECAST_ARCHIVE_VERSION_ID)
;

CREATE TABLE TDT_PRODUCT
(
    PRODUCT_ID NUMBER(19,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    PRODUCT_NAME VARCHAR2(30 CHAR) NOT NULL,
    APPROVE_STATUS VARCHAR2(10 CHAR) NOT NULL,
    AMOUNT NUMBER(38,0) NOT NULL,
    QUANTITY NUMBER(10,0) NOT NULL,
    CREATE_USER_ID VARCHAR2(64 CHAR) NOT NULL,
    CREATE_DATETIME DATE NOT NULL,
    LASTUP_USER_ID VARCHAR2(64 CHAR) NOT NULL,
    LASTUP_DATETIME DATE NOT NULL,
    IS_DELETED CHAR(1 CHAR) DEFAULT '0' NOT NULL,
    PRIMARY KEY(PRODUCT_ID),
    CONSTRAINT UQ_TDT_PRODUCT_01 UNIQUE(PRODUCT_ID)
);
